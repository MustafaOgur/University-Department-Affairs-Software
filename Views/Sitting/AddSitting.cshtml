@model UDAS.ViewModels.SittingAddViewModel

@{
    Layout = "_MenuLayout";
    ViewData["CSS"] = "/css/AddSitting.css";
}

@{
    if (!ViewData.ModelState.IsValid)
    {
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script>
            Swal.fire({
                icon: 'error',
                title: 'Hata',
                text: 'Bir Hata Oluştu!',
            });
        </script>
    }
}


<div class="left"></div>

<div class="center">
    <div class="sitting-box">

        <form method="post" action="/Sitting/AddSitting">
            <div class="name-bar">
                <p id="Title">Oturma Planı Adı:</p>
                <input type="text" id="sitting-name" name="PlanName" value="Oturma Programı - 1" />
            </div>

            <div class="classroom-row">
                <p id="selection">Hangi dersliği seçmek istersiniz?</p>
                <select name="classrooms" id="classrooms">

                    @foreach(var classroom in Model.Classrooms){
                        <option value="@classroom.Id" data-capacity="@classroom.Capacity">@classroom.RoomName</option>
                    }

                </select>
                <button id="select-btn">Seç</button>
            </div>

            <div class="classroom-details">
                <div class="left-side">
                    <div class="listbox" id="listbox">
                        <!-- öğrenci isimleri, js'de ---->
                    </div>

                    <div class="buttons-div">
                        <button id="add-btn">Ekle</button>
                        <button id="delete-btn">Sil</button>
                    </div>
                </div>

                <div class="right-side">
                    <div class="normal-size">
                        <p class="bold-text">Normal Kapasite;</p>
                        <p class="capacity"><span class="student-number"></span> / <span class="real-max-capacity">@Model.Classrooms.FirstOrDefault()?.Capacity</span> </p>
                    </div>

                    <div class="exam-size">
                        <p class="bold-text">Sınav Kapasitesi;</p>
                        <p class="capacity"><span class="student-number"></span> / <span class="real-max-capacity">@Model.Classrooms.FirstOrDefault()?.Capacity</span> </p>
                    </div>
                </div>
            </div>

            <div class="classroom-display">

                @{  
                    int number = 1; 
                    int index = 0;
                }

                @for(int i=1; i<=3; i++){
                    <div class="column">
                        @for(int j=1; j<=6; j++){
                            <div class="groups">
                                <label class="checkbox-container">
                                    <input type="checkbox"  id="@number" />
                                    <div class="check-label"><span class="check-span" id="_@number">[@number]</span></div>

                                    <input type="hidden" name="SeatAssignments[@index].SeatNumber" id="-@number" class="hidden-seat-number" >
                                    <input type="hidden" name="SeatAssignments[@index].Owner" id="-@number" class="hidden-seat-owner" >
                                    @{  
                                        number++;
                                        index++;
                                    }
                                </label>

                                <label class="checkbox-container">
                                    <input type="checkbox" id="@number" />
                                    <div class="check-label"><span class="check-span" id="_@number">[@number]</span></div> @* checkbox'lar seçilmesin diye id'nin başına "_" ekledim *@
                                    
                                    <input type="hidden" name="SeatAssignments[@index].SeatNumber" id="-@number" class="hidden-seat-number" >
                                    <input type="hidden" name="SeatAssignments[@index].Owner" id="-@number" class="hidden-seat-owner" >
                                    @{  
                                        number++; 
                                        index++;
                                    }
                                </label>
                            </div>
                        }

                    </div>
                }

                
            </div>

            <div class="button-bar">
                <button type="button" id="create-btn">Rastgele Oturma Düzeni Oluştur</button>
                <button type="submit" name="action" value="save" id="send-btn">Oturma Düzenini Kaydet</button>
            </div>
        </form>
    </div>

    <div class="blank-div"></div>
</div>

<div class="right"></div>

<script src="/js/AddSitting.js"></script>
